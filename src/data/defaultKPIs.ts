import { KPIDefinition, DivisionKPIConfig } from '../types/branding';

export const defaultKPIDefinitions: KPIDefinition[] = [
  // Performance KPIs
  {
    id: 'productivity-rate',
    key: 'productivityRate',
    name: 'Productivity Rate',
    description: 'Percentage of scheduled hours that were actually booked with clients',
    category: 'performance',
    dataType: 'percentage',
    unit: '%',
    target: 85,
    minValue: 0,
    maxValue: 100,
    isActive: true,
    sortOrder: 1,
    formula: '(Booked Hours / Scheduled Hours) × 100',
    dependencies: ['bookedHours', 'scheduledHours'],
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'prebook-rate',
    key: 'prebookRate',
    name: 'Prebook Rate',
    description: 'Percentage of clients who book their next appointment before leaving',
    category: 'retention',
    dataType: 'percentage',
    unit: '%',
    target: 75,
    minValue: 0,
    maxValue: 100,
    isActive: true,
    sortOrder: 2,
    formula: '(Prebooks / Total Clients) × 100',
    dependencies: ['prebooks', 'totalClients'],
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'first-time-retention',
    key: 'firstTimeRetentionRate',
    name: 'First-Time Retention Rate',
    description: 'Percentage of first-time clients who return for a second visit',
    category: 'retention',
    dataType: 'percentage',
    unit: '%',
    target: 80,
    minValue: 0,
    maxValue: 100,
    isActive: true,
    sortOrder: 3,
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'repeat-retention',
    key: 'repeatRetentionRate',
    name: 'Repeat Retention Rate',
    description: 'Percentage of existing clients who continue their treatment plans',
    category: 'retention',
    dataType: 'percentage',
    unit: '%',
    target: 90,
    minValue: 0,
    maxValue: 100,
    isActive: true,
    sortOrder: 4,
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  // Financial KPIs
  {
    id: 'retail-percentage',
    key: 'retailPercentage',
    name: 'Retail Percentage',
    description: 'Percentage of total sales that come from retail products',
    category: 'financial',
    dataType: 'percentage',
    unit: '%',
    target: 25,
    minValue: 0,
    maxValue: 100,
    isActive: true,
    sortOrder: 5,
    formula: '(Retail Sales / Total Sales) × 100',
    dependencies: ['retailSales', 'totalSales'],
    divisionSpecific: true,
    applicableDivisions: ['laser', 'injectables', 'hormone', 'nutrition'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'average-ticket',
    key: 'averageTicket',
    name: 'Average Ticket',
    description: 'Average revenue per client transaction',
    category: 'financial',
    dataType: 'currency',
    unit: '$',
    target: 250,
    minValue: 0,
    isActive: true,
    sortOrder: 6,
    formula: 'Total Revenue / Number of Transactions',
    dependencies: ['totalRevenue', 'transactions'],
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'service-sales-per-hour',
    key: 'serviceSalesPerHour',
    name: 'Service Sales per Hour',
    description: 'Revenue generated per productive hour worked',
    category: 'financial',
    dataType: 'currency',
    unit: '$/hr',
    target: 150,
    minValue: 0,
    isActive: true,
    sortOrder: 7,
    formula: 'Service Revenue / Productive Hours',
    dependencies: ['serviceRevenue', 'productiveHours'],
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  // Growth KPIs
  {
    id: 'new-clients',
    key: 'newClients',
    name: 'New Clients',
    description: 'Number of first-time clients acquired',
    category: 'growth',
    dataType: 'number',
    unit: 'clients',
    target: 50,
    minValue: 0,
    isActive: true,
    sortOrder: 8,
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  // Operational KPIs
  {
    id: 'hours-sold',
    key: 'hoursSold',
    name: 'Hours Sold',
    description: 'Total number of service hours sold to clients',
    category: 'operational',
    dataType: 'hours',
    unit: 'hours',
    target: 160,
    minValue: 0,
    isActive: true,
    sortOrder: 9,
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  // Satisfaction KPIs
  {
    id: 'happiness-score',
    key: 'happinessScore',
    name: 'Happiness Score',
    description: 'Employee satisfaction and happiness rating',
    category: 'satisfaction',
    dataType: 'score',
    unit: '/10',
    target: 8.5,
    minValue: 1,
    maxValue: 10,
    isActive: true,
    sortOrder: 10,
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'customer-satisfaction',
    key: 'customerSatisfactionScore',
    name: 'Customer Satisfaction',
    description: 'Client satisfaction rating based on surveys and feedback',
    category: 'satisfaction',
    dataType: 'score',
    unit: '/10',
    target: 9.0,
    minValue: 1,
    maxValue: 10,
    isActive: true,
    sortOrder: 11,
    divisionSpecific: false,
    applicableDivisions: ['all'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  // Division-specific KPIs
  {
    id: 'injection-precision',
    key: 'injectionPrecision',
    name: 'Injection Precision Rate',
    description: 'Percentage of injections completed without touch-ups',
    category: 'performance',
    dataType: 'percentage',
    unit: '%',
    target: 95,
    minValue: 0,
    maxValue: 100,
    isActive: true,
    sortOrder: 20,
    divisionSpecific: true,
    applicableDivisions: ['injectables'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'laser-safety-compliance',
    key: 'laserSafetyCompliance',
    name: 'Laser Safety Compliance',
    description: 'Percentage of laser procedures following safety protocols',
    category: 'operational',
    dataType: 'percentage',
    unit: '%',
    target: 100,
    minValue: 0,
    maxValue: 100,
    isActive: true,
    sortOrder: 21,
    divisionSpecific: true,
    applicableDivisions: ['laser'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
  {
    id: 'hormone-consultation-conversion',
    key: 'hormoneConsultationConversion',
    name: 'Consultation Conversion Rate',
    description: 'Percentage of hormone consultations that convert to treatment',
    category: 'growth',
    dataType: 'percentage',
    unit: '%',
    target: 85,
    minValue: 0,
    maxValue: 100,
    isActive: true,
    sortOrder: 22,
    divisionSpecific: true,
    applicableDivisions: ['hormone'],
    createdAt: new Date(),
    updatedAt: new Date(),
  },
];

export const defaultDivisionKPIConfigs: DivisionKPIConfig[] = [
  {
    id: 'laser-config',
    divisionId: 'laser',
    kpiDefinitions: defaultKPIDefinitions.filter(kpi => 
      kpi.applicableDivisions.includes('all') || kpi.applicableDivisions.includes('laser')
    ),
    customTargets: {
      'productivity-rate': 88,
      'retail-percentage': 15,
      'laser-safety-compliance': 100,
    },
    displayOrder: [
      'productivity-rate',
      'laser-safety-compliance',
      'retail-percentage',
      'average-ticket',
      'service-sales-per-hour',
      'new-clients',
      'hours-sold',
      'happiness-score',
    ],
    isActive: true,
    updatedAt: new Date(),
  },
  {
    id: 'injectables-config',
    divisionId: 'injectables',
    kpiDefinitions: defaultKPIDefinitions.filter(kpi => 
      kpi.applicableDivisions.includes('all') || kpi.applicableDivisions.includes('injectables')
    ),
    customTargets: {
      'productivity-rate': 92,
      'retail-percentage': 25,
      'injection-precision': 95,
      'average-ticket': 500,
    },
    displayOrder: [
      'productivity-rate',
      'injection-precision',
      'retail-percentage',
      'average-ticket',
      'service-sales-per-hour',
      'new-clients',
      'happiness-score',
      'customer-satisfaction',
    ],
    isActive: true,
    updatedAt: new Date(),
  },
  {
    id: 'hormone-config',
    divisionId: 'hormone',
    kpiDefinitions: defaultKPIDefinitions.filter(kpi => 
      kpi.applicableDivisions.includes('all') || kpi.applicableDivisions.includes('hormone')
    ),
    customTargets: {
      'productivity-rate': 90,
      'hormone-consultation-conversion': 85,
      'retail-percentage': 30,
      'average-ticket': 300,
    },
    displayOrder: [
      'productivity-rate',
      'hormone-consultation-conversion',
      'prebook-rate',
      'first-time-retention',
      'repeat-retention',
      'retail-percentage',
      'average-ticket',
      'service-sales-per-hour',
      'happiness-score',
    ],
    isActive: true,
    updatedAt: new Date(),
  },
];